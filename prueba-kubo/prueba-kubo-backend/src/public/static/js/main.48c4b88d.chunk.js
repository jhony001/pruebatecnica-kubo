(this["webpackJsonpkubo-frontend"]=this["webpackJsonpkubo-frontend"]||[]).push([[0],{38:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),i=a.n(c),s=a(15),o=a.n(s),r=(a(57),a(21)),h=a(22),l=a(25),d=a(23),j=(a(58),a(38),a(6)),u=a(19),b=a(88),v=a(90),m=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"card",children:Object(n.jsx)("img",{src:this.props.image,className:"card-image"})})}}]),a}(c.Component),p=a(35),O=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={movies:[]},n.handleSelectSearch=n.handleSelectSearch.bind(Object(u.a)(n)),n.handleSearch=n.handleSearch.bind(Object(u.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/movies").then((function(e){return e.json()})).then((function(t){e.setState({movies:t.data}),console.log(e.state.movies)}))}},{key:"handleSelectSearch",value:function(e){var t=this,a=e.target.value;a="All"===a?"":a,fetch("http://localhost:3000/movies/".concat(a)).then((function(e){return e.json()})).then((function(e){t.setState({movies:[]}),t.setState({movies:e.data}),console.log(t.state.movies)}))}},{key:"handleSearch",value:function(){var e=this,t={title:document.getElementById("search-input").value};fetch("http://localhost:3000/movies/search",{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({movies:t.data})}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(b.a,{position:"static",children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)("span",{className:"title",children:"Kubo Movies"}),Object(n.jsxs)("select",{onChange:this.handleSelectSearch,className:"search-control",children:[Object(n.jsx)("option",{value:"All",children:"Todas"}),Object(n.jsx)("option",{value:"Accion",children:"Accion"}),Object(n.jsx)("option",{value:"Terror",children:"Terror"}),Object(n.jsx)("option",{value:"Drama",children:"Drama"}),Object(n.jsx)("option",{value:"Biograficas",children:"Biograficas"}),Object(n.jsx)("option",{value:"Ciencia Ficcion",children:"Ciencia Ficcion"}),Object(n.jsx)("option",{value:"Comedia",children:"Comedia"}),Object(n.jsx)("option",{value:"Romance",children:"Romance"})]}),Object(n.jsx)("input",{id:"search-input",placeholder:"Buscar pelicula",type:"search",className:"search-control"}),Object(n.jsx)("button",{onClick:this.handleSearch,style:{cursor:"pointer"},className:"search-control",children:"Buscar"})]})}),Object(n.jsx)("div",{className:"movies-container",children:this.state.movies.map((function(e){return Object(n.jsx)(p.b,{to:"/movie/".concat(e.title),children:Object(n.jsx)(m,{title:e.title,image:e.url_caratula},e.id)},"1".concat(e.id))}))})]})}}]),a}(c.Component),f=a(95),g=a(91),x=a(92),C=a(94),k=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={movie:{},ratingValue:1,snackBarOpen:!1,snackmessage:"",viewedChecked:!1},n.handleRateChange=n.handleRateChange.bind(Object(u.a)(n)),n.handleClose=n.handleClose.bind(Object(u.a)(n)),n.handleViewChange=n.handleViewChange.bind(Object(u.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;console.log(t.title);var a={title:t.title};fetch("http://localhost:3000/movies/search",{method:"post",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({movie:t.data[0]}),e.setState({ratingValue:t.data[0].calificacion}),null!=t.data[0].vista&&(1===t.data[0].vista.data[0]?e.setState({viewedChecked:!0}):e.setState({viewedChecked:!1}))}))}},{key:"handleRateChange",value:function(e,t){var a=this;this.setState({ratingValue:t});var n={calificacion:t,id:this.state.movie.id};fetch("http://localhost:3000/movies/ratemovie",{method:"post",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){1===e.status?a.setState({snackBarOpen:!0,snackmessage:"Calificacion guardada correctamente"}):console.log(e.message)}))}},{key:"handleClose",value:function(e,t){"clickaway"!==t&&this.setState({snackBarOpen:!1,snackmessage:""})}},{key:"handleViewChange",value:function(e){var t=this;console.log(e.target.checked),this.setState({viewedChecked:e.target.checked});var a={id:this.state.movie.id};e.target.checked?fetch("http://localhost:3000/movies/checkasviewed",{method:"post",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){1===e.status&&t.setState({snackBarOpen:!0,snackmessage:"Esta pelicula se ha marcado como vista"})})):fetch("http://localhost:3000/movies/checkasnotviewed",{method:"post",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"movie-header",children:[Object(n.jsx)("img",{src:this.state.movie.url_caratula}),Object(n.jsxs)("div",{className:"movie-info",children:[Object(n.jsxs)("h2",{children:[Object(n.jsx)("b",{children:"Titulo: "}),this.state.movie.title]}),Object(n.jsxs)("h3",{children:[Object(n.jsx)("b",{children:"Fecha de estreno: "}),this.state.movie.fecha_estreno?this.state.movie.fecha_estreno.substring(0,10):"desconocida"]}),Object(n.jsxs)("h3",{children:[Object(n.jsx)("b",{children:"Duracion: "}),this.state.movie.duracion]}),Object(n.jsx)("h3",{children:Object(n.jsx)("b",{children:"Sinopsis: "})}),Object(n.jsx)("p",{children:this.state.movie.descripcion}),Object(n.jsx)("h3",{children:Object(n.jsx)("b",{children:"Califica esta pelicula:"})}),Object(n.jsx)(f.a,{name:"Calificacion de ".concat(this.state.movie.title),value:this.state.ratingValue,precision:1,onChange:this.handleRateChange}),Object(n.jsxs)("h3",{children:[Object(n.jsx)("b",{children:"Marcar como vista: "})," ",Object(n.jsx)(C.a,{checked:this.state.viewedChecked,onChange:this.handleViewChange})]})]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Trailer"}),Object(n.jsx)("iframe",{width:"860",height:"515",src:this.state.movie.url_trailer,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})]}),Object(n.jsx)(g.a,{open:this.state.snackBarOpen,autoHideDuration:2e3,onClose:this.handleClose,children:Object(n.jsx)(x.a,{onClose:this.handleClose,children:this.state.snackmessage})})]})}}]),a}(c.Component),y=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{exact:!0,path:"/",component:O}),Object(n.jsx)(j.a,{path:"/movie/:title",component:k})]})})}}]),a}(c.Component),S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,97)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),i(e),s(e)}))};o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(p.a,{children:Object(n.jsx)(y,{})})}),document.getElementById("root")),S()}},[[64,1,2]]]);
//# sourceMappingURL=main.48c4b88d.chunk.js.map